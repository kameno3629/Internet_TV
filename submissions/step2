


## 手順書（Notion）
https://www.notion.so/STEP2-DB-5b8243c6c963460187681e5d5df0fcf9?pvs=4


Notionが見れなかったときの為、以下に同じものを貼っておきます

======================================

# ＜DB・テーブル作成手順＞

## 作業作ディレクトリ作成

```bash
mkdir ディレクトリ名
```

作成したディレクトリへ移動

```bash
cd ディレクトリ名
```

## DBをインストール

mysqlインストール

```bash
brew install mysql
```

mysql起動

```bash
brew services start mysql
```

mysqlに接続

```bash
mysql -u root -p
```

## DB作成

DB作成

```sql
CREATE DATABASE InternetTV;
```

使用するDBを選択

```sql
USE InternetTV;
```

## テーブル作成

テーブル作成

そのままmysqlのコマンドラインで以下のスクリプトを入力。
今回は各テーブルごとに小分けで入力するように。

```sql
# チャンネルテーブル
CREATE TABLE Channel (
    Channel_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    Channel_name VARCHAR(100) NOT NULL,
    PRIMARY KEY (Channel_ID)
);

# 番組テーブル
CREATE TABLE Program (
    Program_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    Program_name VARCHAR(100) NOT NULL,
    Genre VARCHAR(100) NOT NULL,
    Program_details TEXT NULL,
    PRIMARY KEY (Program_ID)
);

# シーズンテーブル
CREATE TABLE Season (
    Season_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    Program_ID BIGINT(20) NOT NULL,
    Season_Number INT NOT NULL,
    PRIMARY KEY (Season_ID),
    FOREIGN KEY (Program_ID) REFERENCES Program(Program_ID)
);

# エピソードテーブル
CREATE TABLE Episode (
    Episode_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    Program_ID BIGINT(20) NOT NULL,
    Season_ID BIGINT(20) NOT NULL,
    Episode_name VARCHAR(100) NOT NULL,
    Episode_Number INT NOT NULL,
    Episode_details TEXT NULL,
    Video_duration TIME NOT NULL,
    Release_time DATETIME NOT NULL,
    PRIMARY KEY (Episode_ID),
    FOREIGN KEY (Program_ID) REFERENCES Program(Program_ID),
    FOREIGN KEY (Season_ID) REFERENCES Season(Season_ID)
);

# 番組枠テーブル
CREATE TABLE Program_slot (
    Program_slot_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    Channel_ID BIGINT(20) NOT NULL,
    Episode_ID BIGINT(20) NOT NULL,
    start_time DATETIME NOT NULL,
    ending_time DATETIME NOT NULL,
    PRIMARY KEY (Program_slot_ID),
    FOREIGN KEY (Channel_ID) REFERENCES Channel(Channel_ID),
    FOREIGN KEY (Episode_ID) REFERENCES Episode(Episode_ID)
);

# 視聴数テーブル
CREATE TABLE View_count (
    Program_slot_ID BIGINT(20) NOT NULL,
    View_count INT NOT NULL,
    FOREIGN KEY (Program_slot_ID) REFERENCES Program_slot(Program_slot_ID)
);
```

## サンプルデータ生成

**＜作成したいサンプルデータ＞**

**チャンネル**

- ドラマ
- アニメ
- スポーツ

**番組**

- 鬼滅の刃(アニメ)
- 進撃の巨人(アニメ)
- ワンピース(アニメ)
- 名探偵コナン(アニメ)
- 半沢直樹(ドラマ)
- 相棒(ドラマ)
- ドクターX(ドラマ)
- サッカー(スポーツ)
- 野球(スポーツ)

**シーズン**

- 鬼滅の刃: シーズン1
- 進撃の巨人: シーズン1
- ワンピース: シーズン1
- 名探偵コナン: シーズン1
- 半沢直樹: シーズン1
- 相棒: シーズン1
- ドクターX: シーズン1
- サッカー: シーズン1
- 野球: シーズン1

**エピソード**

- 鬼滅の刃: シーズン1
    - 第1話
    - 第2話
    - 第3話
- 進撃の巨人: シーズン1
    - 第1話
    - 第2話
    - 第3話
- ワンピース: シーズン1
    - 第1話
    - 第2話
    - 第3話
- 名探偵コナン: シーズン1
    - 第1話
    - 第2話
    - 第3話
- 半沢直樹: シーズン1
    - 第1話
    - 第2話
    - 第3話
- 相棒: シーズン1
    - 第1話
    - 第2話
    - 第3話
- ドクターX: シーズン1
    - 第1話
    - 第2話
    - 第3話
- サッカー: シーズン1
    - 第1話
    - 第2話
    - 第3話
- 野球: シーズン1
    - 第1話
    - 第2話
    - 第3話

**番組枠**

**ドラマチャンネル**

- 鬼滅の刃 第1話:2023-10-01 20:00:00- 2023-10-01 20:24:00
- 鬼滅の刃 第2話: 2023-10-02 20:00:00 - 2023-10-02 20:24:00
- 鬼滅の刃 第3話: 2023-10-03 20:00:00 - 2023-10-03 20:24:00
- ドクターX 第1話: 2023-10-05 20:00:00 - 2023-10-05 20:24:00
- ワンピース 第1話: 2023-10-03 20:00:00 - 2023-10-03 20:24:00
- ワンピース 第2話: 2023-10-04 20:00:00 - 2023-10-04 20:24:00
- サッカー 第2話: 2023-10-07 20:00:00 - 2023-10-07 20:24:00
- 半沢直樹 第2話: 2023-10-09 20:00:00 - 2023-10-09 20:24:00
- 名探偵コナン 第2話: 2023-10-05 20:00:00 - 2023-10-05 20:24:00
- 相棒 第3話: 2023-10-07 22:00:00 - 2023-10-07 22:24:00

**アニメチャンネル**

- 進撃の巨人 第1話: 2023-10-01 21:00:00 - 2023-10-01 21:24:00
- 進撃の巨人 第2話: 2023-10-02 21:00:00 - 2023-10-02 21:24:00
- 名探偵コナン 第1話: 2023-10-03 21:00:00 - 2023-10-03 21:24:00
- サッカー 第1話: 2023-10-05 21:00:00 - 2023-10-05 21:24:00
- サッカー 第3話: 2023-10-10 21:00:00 - 2023-10-10 21:24:00
- ドクターX 第2話: 2023-10-06 21:00:00 - 2023-10-06 21:24:00
- 半沢直樹 第3話: 2023-10-08 21:00:00 - 2023-10-08 21:24:00
- 名探偵コナン 第3話: 2023-10-09 21:00:00 - 2023-10-09 21:24:00
- 進撃の巨人 第3話: 2023-10-03 21:00:00 - 2023-10-03 21:24:00
- 進撃の巨人 第2話: 2023-10-02 21:00:00 - 2023-10-02 21:24:00

**スポーツチャンネル**

- 半沢直樹 第1話: 2023-10-01 22:00:00 - 2023-10-01 22:24:00
- 相棒 第1話: 2023-10-03 22:00:00 - 2023-10-03 22:24:00
- 野球 第1話: 2023-10-05 22:00:00 - 2023-10-05 22:24:00
- ドクターX 第3話: 2023-10-07 22:00:00 - 2023-10-07 22:24:00
- ワンピース 第3話: 2023-10-09 22:00:00 - 2023-10-09 22:24:00
- 進撃の巨人 第3話: 2023-10-03 22:00:00 - 2023-10-03 22:24:00
- 野球 第2話: 2023-10-10 22:00:00 - 2023-10-10 22:24:00
- 半沢直樹 第1話: 2023-10-01 22:00:00 - 2023-10-01 22:24:00
- 相棒 第2話: 2023-10-05 22:00:00 - 2023-10-05 22:24:00
- 半沢直樹 第1話: 2023-10-01 22:00:00 - 2023-10-01 22:24:00

**視聴数**

- サッカー (アニメ)
    - 第1話: 1700
    - 第3話: 2400
- サッカー (ドラマ)
    - 第2話: 2300
- ドクターX (アニメ)
    - 第2話: 2100
- ドクターX (スポーツ)
    - 第3話: 2200
- ドクターX (ドラマ)
    - 第1話: 1600
- 半沢直樹 (アニメ)
    - 第3話: 1500
- 半沢直樹 (スポーツ)
    - 第1話: 2500
- 半沢直樹 (ドラマ)
    - 第2話: 1400
- 名探偵コナン (アニメ)
    - 第1話: 1400
    - 第3話: 1800
- 名探偵コナン (ドラマ)
    - 第2話: 1700
- 進撃の巨人 (アニメ)
    - 第1話: 2000
    - 第2話: 1200
- 進撃の巨人 (スポーツ)
    - 第3話: 1300
- ワンピース (スポーツ)
    - 第3話: 1600
- ワンピース (ドラマ)
    - 第1話: 1200
    - 第2話: 1300
- 相棒 (スポーツ)
    - 第1話: 1500
    - 第2話: 1900
- 相棒 (ドラマ)
    - 第3話: 2000
- 野球 (スポーツ)
    - 第1話: 1800
    - 第2話: 2500
- 鬼滅の刃 (ドラマ)
    - 第1話: 1000
    - 第2話: 1500
    - 第3話: 1100

**＜サンプルデータ作成＞**

mysqlのコマンドラインで入力
データはChatGPTで生成しました。

```sql
-- チャンネル
INSERT INTO Channel (Channel_name) VALUES 
('ドラマ'),
('アニメ'),
('スポーツ');

-- 番組
INSERT INTO Program (Program_name, Genre, Program_details) VALUES 
('鬼滅の刃', 'アニメ', '鬼滅の刃の詳細'),
('進撃の巨人', 'アニメ', '進撃の巨人の詳細'),
('ワンピース', 'アニメ', 'ワンピースの詳細'),
('名探偵コナン', 'アニメ', '名探偵コナンの詳細'),
('半沢直樹', 'ドラマ', '半沢直樹の詳細'),
('相棒', 'ドラマ', '相棒の詳細'),
('ドクターX', 'ドラマ', 'ドクターXの詳細'),
('サッカー', 'スポーツ', 'サッカーの詳細'),
('野球', 'スポーツ', '野球の詳細');

-- シーズン
INSERT INTO Season (Program_ID, Season_Number) VALUES 
(1, 1),
(2, 1),
(3, 1),
(4, 1),
(5, 1),
(6, 1),
(7, 1),
(8, 1),
(9, 1);

-- エピソード
INSERT INTO Episode (Program_ID, Season_ID, Episode_name, Episode_Number, Episode_details, Video_duration, Release_time) VALUES 
(1, 1, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(1, 1, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(1, 1, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(2, 2, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(2, 2, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(2, 2, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(3, 3, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(3, 3, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(3, 3, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(4, 4, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(4, 4, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(4, 4, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(5, 5, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(5, 5, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(5, 5, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(6, 6, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(6, 6, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(6, 6, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(7, 7, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(7, 7, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(7, 7, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(8, 8, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(8, 8, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(8, 8, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00'),
(9, 9, '第1話', 1, '第1話の詳細', '00:24:00', '2023-01-01 00:00:00'),
(9, 9, '第2話', 2, '第2話の詳細', '00:24:00', '2023-01-02 00:00:00'),
(9, 9, '第3話', 3, '第3話の詳細', '00:24:00', '2023-01-03 00:00:00');

-- 番組枠
INSERT INTO Program_slot (Channel_ID, Episode_ID, start_time, ending_time) VALUES 
(1, 1, '2023-10-01 20:00:00', '2023-10-01 20:24:00'),
(1, 2, '2023-10-02 20:00:00', '2023-10-02 20:24:00'),
(2, 3, '2023-10-01 21:00:00', '2023-10-01 21:24:00'),
(3, 4, '2023-10-01 22:00:00', '2023-10-01 22:24:00'),
(1, 5, '2023-10-03 20:00:00', '2023-10-03 20:24:00'),
(1, 6, '2023-10-04 20:00:00', '2023-10-04 20:24:00'),
(2, 7, '2023-10-03 21:00:00', '2023-10-03 21:24:00'),
(3, 8, '2023-10-03 22:00:00', '2023-10-03 22:24:00'),
(1, 9, '2023-10-05 20:00:00', '2023-10-05 20:24:00'),
(2, 10, '2023-10-05 21:00:00', '2023-10-05 21:24:00'),
(3, 11, '2023-10-05 22:00:00', '2023-10-05 22:24:00'),
(1, 12, '2023-10-06 20:00:00', '2023-10-06 20:24:00'),
(2, 13, '2023-10-06 21:00:00', '2023-10-06 21:24:00'),
(3, 14, '2023-10-06 22:00:00', '2023-10-06 22:24:00'),
(1, 15, '2023-10-07 20:00:00', '2023-10-07 20:24:00'),
(2, 16, '2023-10-07 21:00:00', '2023-10-07 21:24:00'),
(3, 17, '2023-10-07 22:00:00', '2023-10-07 22:24:00'),
(1, 18, '2023-10-08 20:00:00', '2023-10-08 20:24:00'),
(2, 19, '2023-10-08 21:00:00', '2023-10-08 21:24:00'),
(3, 20, '2023-10-08 22:00:00', '2023-10-08 22:24:00'),
(1, 21, '2023-10-09 20:00:00', '2023-10-09 20:24:00'),
(2, 22, '2023-10-09 21:00:00', '2023-10-09 21:24:00'),
(3, 23, '2023-10-09 22:00:00', '2023-10-09 22:24:00'),
(1, 24, '2023-10-10 20:00:00', '2023-10-10 20:24:00'),
(2, 25, '2023-10-10 21:00:00', '2023-10-10 21:24:00'),
(3, 26, '2023-10-10 22:00:00', '2023-10-10 22:24:00');

-- 視聴数
INSERT INTO View_count (Program_slot_ID, View_count) VALUES 
INSERT INTO View_count (Program_slot_ID, View_count) VALUES 
(1, 1000),  -- 鬼滅の刃 第1話 (ドラマ)
(2, 1500),  -- 鬼滅の刃 第2話 (ドラマ)
(3, 1100),  -- 鬼滅の刃 第3話 (ドラマ)
(4, 2000),  -- 進撃の巨人 第1話 (アニメ)
(5, 1200),  -- 進撃の巨人 第2話 (アニメ)
(6, 1300),  -- 進撃の巨人 第3話 (スポーツ)
(7, 1200),  -- ワンピース 第1話 (ドラマ)
(8, 1300),  -- ワンピース 第2話 (ドラマ)
(9, 1600),  -- ワンピース 第3話 (スポーツ)
(10, 1400), -- 名探偵コナン 第1話 (アニメ)
(11, 1700), -- 名探偵コナン 第2話 (ドラマ)
(12, 1800), -- 名探偵コナン 第3話 (アニメ)
(13, 2500), -- 半沢直樹 第1話 (スポーツ)
(14, 1400), -- 半沢直樹 第2話 (ドラマ)
(15, 1500), -- 半沢直樹 第3話 (アニメ)
(16, 1500), -- 相棒 第1話 (スポーツ)
(17, 1900), -- 相棒 第2話 (スポーツ)
(18, 2000), -- 相棒 第3話 (ドラマ)
(19, 1600), -- ドクターX 第1話 (ドラマ)
(20, 2100), -- ドクターX 第2話 (アニメ)
(21, 2200), -- ドクターX 第3話 (スポーツ)
(22, 1700), -- サッカー 第1話 (アニメ)
(23, 2300), -- サッカー 第2話 (ドラマ)
(24, 2400), -- サッカー 第3話 (アニメ)
(25, 1800), -- 野球 第1話 (スポーツ)
(26, 2500); -- 野球 第2話 (スポーツ)
```